{"version":3,"mappings":"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","names":["BaseController","name","_modules_service_injector_module__WEBPACK_IMPORTED_MODULE_1__","appLoggerService","_services_logger__WEBPACK_IMPORTED_MODULE_0__","logger","getLogger","debug","isAndroid","_services_state_app_state__WEBPACK_IMPORTED_MODULE_2__","routes","path","component","_connection_failed_page__WEBPACK_IMPORTED_MODULE_0__","ConnectionFailedPageRoutingModule","_angular_router__WEBPACK_IMPORTED_MODULE_2__","imports","exports","ConnectionFailedPageModule","_angular_common__WEBPACK_IMPORTED_MODULE_3__","_angular_forms__WEBPACK_IMPORTED_MODULE_4__","_ionic_angular__WEBPACK_IMPORTED_MODULE_5__","_connection_failed_routing_module__WEBPACK_IMPORTED_MODULE_0__","declarations","_connection_failed_page__WEBPACK_IMPORTED_MODULE_1__","_angular_core__WEBPACK_IMPORTED_MODULE_6__","ConnectionFailedPage","navigationService","reportService","vehicleService","helper","route","deviceId","snapshot","queryParamMap","get","toolName","sourcePage","reportSession","getReportSession","restoreHardwareBack","console","log","goTo","src_app_app_routing_module__WEBPACK_IMPORTED_MODULE_0__","queryParams","ctx","hasDlc","vin","length","showLoading","getDlcLocationByVin","then","result","hideLoading","dlcModel","data","saveReportSession","err","deleteReportSession","popToRoot","src_app_bases_base_controller__WEBPACK_IMPORTED_MODULE_1__","selectors","features","decls","vars","consts","template"],"sources":["webpack:///src/app/bases/base-controller.ts","webpack:///src/app/pages/connection-failed/connection-failed-routing.module.ts","webpack:///src/app/pages/connection-failed/connection-failed.module.ts","webpack:///src/app/pages/connection-failed/connection-failed.page.html","webpack:///src/app/pages/connection-failed/connection-failed.page.ts"],"sourcesContent":["import { AppLogger, AppLoggerService } from '../services/logger';\nimport { ServiceInjector } from '../modules/service-injector.module';\nimport { AppState } from '../services/state/app.state';\nexport class BaseController {\n  protected readonly logger: AppLogger;\n  protected readonly serviceInjector = ServiceInjector;\n  protected readonly name: string;\n  public isAndroid: boolean;\n\n  constructor(name: string) {\n    this.name = name;// || this.constructor?.name;\n\n    const appLoggerService: AppLoggerService =\n    ServiceInjector.get(AppLoggerService);\n    this.logger = appLoggerService?.getLogger(this.name);\n    this.logger.debug('Enter');\n    this.isAndroid = AppState.isOnAndroid;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ConnectionFailedPage } from './connection-failed.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ConnectionFailedPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ConnectionFailedPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ConnectionFailedPageRoutingModule } from './connection-failed-routing.module';\n\nimport { ConnectionFailedPage } from './connection-failed.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ConnectionFailedPageRoutingModule\n  ],\n  declarations: [ConnectionFailedPage]\n})\nexport class ConnectionFailedPageModule {}\n","<ion-header class=\"ion-no-border\">\n  <ion-toolbar color=\"danger\" mode=\"md\" *ngIf=\"isAndroid\">\n    <ion-title>Connection Failed</ion-title>\n  </ion-toolbar>\n  <ion-toolbar color=\"danger\" mode=\"ios\" *ngIf=\"!isAndroid\">\n    <ion-title>Connection Failed</ion-title>\n  </ion-toolbar>\n</ion-header>\n<ion-content class=\"ion-padding\">\n  <div class=\"px-4 py-2 bg-01\">\n    <p class=\"text-center\"><img src=\"assets/img/no-dlc.jpg\" style=\"max-height: 65vh;\"/></p>\n    <h2>No device detected</h2>\n    <p class=\"text-light\">Make sure the tool is connected to the vehicle's DLC, the key is turned to the run position (engine OFF), and Bluetooth is enabled on your phone or tablet.</p>\n  </div>\n  \n</ion-content>\n<ion-footer class=\"ion-no-border p-2\">\n  <ion-toolbar class=\"py-1\">\n    <p class=\"text-center font-size-18 mb-2\" (click)=\"locateDlc()\"><a>Locate DLC</a></p>\n    <ion-grid>\n      <ion-row>\n        <ion-col>\n          <ion-button class=\"app-button\" expand=\"block\" (click)=\"goHome()\">Home</ion-button>\n        </ion-col>\n        <ion-col>\n          <ion-button class=\"app-button\" color=\"danger\" expand=\"block\" (click)=\"tryAgain()\">Try Again</ion-button>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </ion-toolbar>\n</ion-footer>","import { Component, OnInit } from '@angular/core';\nimport { ReportSession } from 'src/app/models/report-session';\nimport { HelperService } from 'src/app/services/helper.service';\nimport { ReportServiceProvider } from 'src/app/services/report-service/report-service';\nimport { VehicleServiceProvider } from 'src/app/services/vehicle-service/vehicle-service';\nimport { ActivatedRoute } from '@angular/router';\nimport { RoutePath } from 'src/app/app-routing.module';\nimport { NavigationService } from 'src/app/services/navigation.service';\nimport { BaseController } from 'src/app/bases/base-controller';\nimport { AppState } from 'src/app/services/state/app.state';\n@Component({\n  selector: 'app-connection-failed',\n  templateUrl: './connection-failed.page.html',\n  styleUrls: ['./connection-failed.page.scss'],\n})\nexport class ConnectionFailedPage extends BaseController implements OnInit {\n  locationImageUrl: any;\n  isRetry = false;\n  isCanceled = false;\n  Mileage = 0;\n  WorkOrderNumber = '';\n  hasDlcInfo = false;\n  deviceId = '';\n  toolName = '';\n  reportSession: ReportSession;\n  sourcePage: string;\n  public unregisterBackButtonAction: any;\n\n  constructor(\n    private navigationService: NavigationService,\n    private reportService: ReportServiceProvider,\n    private vehicleService: VehicleServiceProvider,\n    private helper: HelperService,\n    private route: ActivatedRoute\n  ) {\n    super('ConnectionFailedPage');\n  }\n  ionViewWillEnter() {\n    this.deviceId = this.route.snapshot.queryParamMap.get('deviceId');\n    this.toolName = this.route.snapshot.queryParamMap.get('toolName');\n    this.sourcePage = this.route.snapshot.queryParamMap.get('sourcePage');\n  }\n\n  ngOnInit() {}\n  ionViewDidEnter() {\n    this.reportSession = this.reportService.getReportSession();\n  }\n\n  ionViewWillLeave() {\n    // Unregister the custom back button action for this page\n    this.navigationService.restoreHardwareBack();\n  }\n\n  // public initializeBackButtonCustomHandler(): void {\n  //   this.unregisterBackButtonAction = this.platform.registerBackButtonAction(() => {\n  //     this.customHandleBackButton();\n  //   }, 10);\n  // }\n\n  // private customHandleBackButton(): void {\n  //   this.goHome();\n  // }\n\n  tryAgain() {\n    console.log('tryAgain click');\n    this.navigationService.goTo(\n      this.sourcePage ? this.sourcePage : RoutePath.VehicleLinking,\n      { queryParams: { deviceId: this.deviceId, toolName: this.toolName } }\n    );\n  }\n\n  locateDlc() {\n    let ctx = this;\n    if (ctx.reportSession.hasDlc) {\n      this.navigationService.goTo(RoutePath.DlcLocatorDetails);\n    } else {\n      if (this.reportSession.vin && this.reportSession.vin.length === 17) {\n        ctx.helper.showLoading();\n        ctx.vehicleService\n          .getDlcLocationByVin(this.reportSession.vin)\n          .then((result) => {\n            ctx.helper.hideLoading();\n            this.reportSession.hasDlc = true;\n            this.reportSession.dlcModel = result.data;\n            this.reportService.saveReportSession(this.reportSession);\n            this.navigationService.goTo(RoutePath.DlcLocatorDetails);\n          })\n          .catch((err) => {\n            ctx.helper.hideLoading();\n            this.reportSession.hasDlc = false;\n            this.reportService.saveReportSession(this.reportSession);\n            this.navigationService.goTo(RoutePath.DlcLocatorDetails);\n          });\n      } else {\n        this.navigationService.goTo(RoutePath.DlcLocator);\n      }\n    }\n  }\n\n  goHome() {\n    this.reportService.deleteReportSession();\n    this.helper.popToRoot(RoutePath.Home);\n  }\n}\n"]}