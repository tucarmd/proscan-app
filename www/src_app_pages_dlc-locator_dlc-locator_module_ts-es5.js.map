{"version":3,"mappings":"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","names":["routes","path","component","_dlc_locator_page__WEBPACK_IMPORTED_MODULE_0__","DlcLocatorPageRoutingModule","_angular_router__WEBPACK_IMPORTED_MODULE_2__","imports","exports","DlcLocatorPageModule","_angular_common__WEBPACK_IMPORTED_MODULE_3__","_angular_forms__WEBPACK_IMPORTED_MODULE_4__","_ionic_angular__WEBPACK_IMPORTED_MODULE_5__","_dlc_locator_routing_module__WEBPACK_IMPORTED_MODULE_0__","declarations","_dlc_locator_page__WEBPACK_IMPORTED_MODULE_1__","_angular_core__WEBPACK_IMPORTED_MODULE_11__","DlcLocatorPage","navCtrl","navParams","vehicleService","reportService","barcodeScanner","modalCtrl","toolService","helper","_dlc_locator_details_dlc_locator_details_page__WEBPACK_IMPORTED_MODULE_3__","showLoading","getMakes","data","success","makes","alert","src_app_configs_app_config__WEBPACK_IMPORTED_MODULE_1__","hideLoading","reportSession","getReportSession","selectedValue","logger","debug","make","detail","value","ctx","getYears","years","year","model","getModels","models","getDlcLocation","hasDlc","dlcModel","saveReportSession","goTo","src_app_app_routing_module__WEBPACK_IMPORTED_MODULE_0__","vin","getDlcLocationByVin","src_app_services_state_app_state__WEBPACK_IMPORTED_MODULE_5__","scan","orientation","prompt","then","barcodeData","cancelled","text","enterVinManually","format","length","substring","wait","scanVin","err","error","create","_enter_vin_enter_vin_page__WEBPACK_IMPORTED_MODULE_4__","modal","present","onDidDismiss","goBack","src_app_bases_base_controller__WEBPACK_IMPORTED_MODULE_2__","selectors","features","decls","vars","consts","template"],"sources":["webpack:///src/app/pages/dlc-locator/dlc-locator-routing.module.ts","webpack:///src/app/pages/dlc-locator/dlc-locator.module.ts","webpack:///src/app/pages/dlc-locator/dlc-locator.page.html","webpack:///src/app/pages/dlc-locator/dlc-locator.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DlcLocatorPage } from './dlc-locator.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DlcLocatorPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DlcLocatorPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DlcLocatorPageRoutingModule } from './dlc-locator-routing.module';\n\nimport { DlcLocatorPage } from './dlc-locator.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    DlcLocatorPageRoutingModule\n  ],\n  declarations: [DlcLocatorPage]\n})\nexport class DlcLocatorPageModule {}\n","<ion-header class=\"ion-no-border\">\n  <ion-toolbar mode=\"md\" *ngIf=\"isAndroid\">\n    <ion-title>DLC Locator</ion-title>\n  </ion-toolbar>\n  <ion-toolbar mode=\"ios\" *ngIf=\"!isAndroid\">\n    <ion-title>DLC Locator</ion-title>\n  </ion-toolbar>\n</ion-header>\n<ion-content class=\"ion-padding\">\n  <ion-grid>\n    <ion-row>\n      <ion-col class=\"mb-4\">\n        <ion-select\n        class=\"app-select\"\n        placeholder=\"Make\"\n        [(ngModel)]=\"make\"\n        (ionChange)=\"loadYears($event)\"\n      >\n        <ion-select-option *ngFor=\"let m of makes\" [value]=\"m\"\n          >{{m}}</ion-select-option\n        >\n      </ion-select>\n      </ion-col>\n    </ion-row>\n    <ion-row>\n      <ion-col class=\"mb-4\">\n        <ion-select\n        class=\"app-select\"\n        placeholder=\"Year\"\n        [disabled]=\"!make\"\n        [(ngModel)]=\"year\"\n        (ionChange)=\"loadModels($event)\"\n      >\n        <ion-select-option *ngFor=\"let y of years\" [value]=\"y\"\n          >{{y}}</ion-select-option\n        >\n      </ion-select>\n      </ion-col>\n    </ion-row>\n    <ion-row>\n      <ion-col class=\"mb-5\">\n        <ion-select\n        class=\"app-select\"\n        placeholder=\"Model\"\n        [disabled]=\"!make || !year\"\n        [(ngModel)]=\"model\"\n        (ionChange)=\"setModel($event)\"\n      >\n        <ion-select-option *ngFor=\"let m of models\" value=\"{{m}}\"\n          >{{m}}</ion-select-option\n        >\n      </ion-select>\n      </ion-col>\n    </ion-row>\n    <ion-row>\n      <ion-col class=\"text-center\">\n        <p class=\"mb-5\">\n          <ion-button\n            class=\"app-button\"\n            expand=\"block\"\n            type=\"submit\"\n            (click)=\"getDlcLocation()\"\n            [disabled]=\"!(year != '' && make != '' && model != '')\"\n            >Submit</ion-button\n          >\n        </p>\n      </ion-col>\n    </ion-row>\n    <ion-row (click)=\"scanVin()\">\n      <ion-col class=\"text-center mb-3\"><a class=\"font-size-18\">Scan VIN</a></ion-col>\n    </ion-row>\n    <ion-row (click)=\"cancel()\">\n      <ion-col class=\"text-center\"><a class=\"font-size-18 text-light\">Cancel</a></ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-content>\n","import { Component, OnInit } from '@angular/core';\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner/ngx';\nimport { ModalController, NavController, NavParams } from '@ionic/angular';\nimport { Subscription } from 'rxjs';\nimport { RoutePath } from 'src/app/app-routing.module';\nimport { AppStrings } from 'src/app/configs/app.config';\nimport { BaseController } from 'src/app/bases/base-controller';\nimport { ReportSession } from 'src/app/models/report-session';\nimport { HelperService } from 'src/app/services/helper.service';\nimport { ReportServiceProvider } from 'src/app/services/report-service/report-service';\nimport { ToolServiceProvider } from 'src/app/services/tool-service/tool-service';\nimport { VehicleServiceProvider } from 'src/app/services/vehicle-service/vehicle-service';\nimport { DlcLocatorDetailsPage } from '../dlc-locator-details/dlc-locator-details.page';\nimport { EnterVinPage } from '../enter-vin/enter-vin.page';\nimport { AppState } from 'src/app/services/state/app.state';\n\n@Component({\n  selector: 'app-dlc-locator',\n  templateUrl: './dlc-locator.page.html',\n  styleUrls: ['./dlc-locator.page.scss'],\n})\nexport class DlcLocatorPage extends BaseController implements OnInit {\n  watchSub: Subscription;\n  DlcLocatorDetailsPage = DlcLocatorDetailsPage;\n  makes: Array<string> = [];\n  years: Array<number> = [];\n  models: Array<string> = [];\n  make = \"\";\n  year = \"\";\n  model = \"\";\n  reportSession: ReportSession;\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    public vehicleService: VehicleServiceProvider,\n    public reportService: ReportServiceProvider,\n    public barcodeScanner: BarcodeScanner,\n    public modalCtrl: ModalController,\n    public toolService: ToolServiceProvider,\n    public helper: HelperService) {\n      super('DlcLocatorPage');\n  }\n\n  async ngOnInit() {\n    await this.helper.showLoading();\n    let data = await this.vehicleService.getMakes();\n    if (data.success) {\n      this.makes = data.data;\n    } else {\n      this.helper.alert(AppStrings.MSG_SERVER_ERROR_TRY_LATER, AppStrings.ERROR);\n    };\n    await this.helper.hideLoading();\n  }\n\n  ionViewWillEnter(){\n    this.reportSession = this.reportService.getReportSession();\n  }\n\n  async loadYears(selectedValue: any) {\n    this.logger.debug('🚀 ~ file: dlc-locator.page.ts ~ line 55 ~ DlcLocatorPage ~ loadYears ~ selectedValue', selectedValue)\n    if (selectedValue) {\n      await this.helper.showLoading();\n      this.make = selectedValue.detail.value;\n      let ctx = this;\n      this.logger.debug('load years', this.make);\n      let data = await ctx.vehicleService.getYears(this.make);\n      await ctx.helper.hideLoading();\n      if (data.success) {\n        ctx.years = data.data;\n        ctx.year = '';\n        ctx.model = '';\n      } else {\n        ctx.helper.alert(AppStrings.MSG_SERVER_ERROR_TRY_LATER, AppStrings.ERROR);\n      }\n    }\n  }\n\n  async loadModels(selectedValue: any) {\n    if (selectedValue) {\n      let ctx = this;\n      ctx.year = selectedValue.detail.value;\n      if(ctx.year){\n        this.helper.showLoading();\n        let data = await ctx.vehicleService.getModels(ctx.make, ctx.year);\n        ctx.helper.hideLoading();\n        if (data.success) {\n          ctx.models = data.data;\n          ctx.model = '';\n        } else {\n          ctx.helper.alert(AppStrings.MSG_SERVER_ERROR_TRY_LATER, AppStrings.ERROR);\n        };\n      }\n    }\n  }\n\n  setModel(selectedValue: any) {\n    if (selectedValue)\n      this.model = selectedValue.detail.value;\n  }\n\n  async getDlcLocation() {\n    if(this.year === '' || this.make === '' || this.model === ''){\n      this.helper.alert(\"Please select Year, Make, and Model to view DLC location.\", AppStrings.ERROR);\n      return;\n    }\n    this.helper.showLoading();\n    let data = await this.vehicleService.getDlcLocation(this.make, this.year, this.model);\n    this.helper.hideLoading();\n    if (data.success) {\n      let reportSession = this.reportService.getReportSession();\n      reportSession.hasDlc = true;\n      reportSession.dlcModel = data.data;\n      this.reportService.saveReportSession(reportSession);\n      this.helper.goTo(RoutePath.DlcLocatorDetails);\n    } else {\n      this.helper.alert(\"Unable to get DLC location for this vehicle. Please try again.\", AppStrings.ERROR);\n    };\n  }\n\n  async getDlcLocationByVin(vin: string) {\n    this.helper.showLoading();\n    let data = await this.vehicleService.getDlcLocationByVin(vin);\n    this.helper.hideLoading();\n    if (data.success) {\n      let reportSession = this.reportService.getReportSession();\n      reportSession.dlcModel = data.data;\n      this.reportService.saveReportSession(reportSession);\n      this.helper.goTo(RoutePath.DlcLocatorDetails);\n    } else {\n      this.helper.alert('Invalid VIN. Either this VIN is too new for our system, or our system cannot decode this VIN, or this VIN is invalid. Please enter a different VIN.', AppStrings.ERROR);\n    }\n  }\n\n  scanVin() {\n    let ctx = this;\n    if (AppState.isOnDevice) {\n      try {\n        ctx.barcodeScanner.scan({ orientation: \"portrait\", prompt: \"\" }).then((barcodeData) => {\n          if (barcodeData.cancelled) {\n            if (barcodeData.text && barcodeData.text === 'enterVin') {\n              this.enterVinManually();\n            }\n          }\n          else if (barcodeData) {\n            let vin = barcodeData.text;\n            if (barcodeData.format === 'CODE_39' || (vin != '' && vin.length >= 17)) {\n              if (vin.length > 17) {\n                vin = vin.substring(1);\n              }\n              ctx.getDlcLocationByVin(vin);\n            }\n            else {\n              ctx.toolService.wait(10).then(() => {\n                ctx.scanVin();\n              });\n            }\n          }\n        }, (err) => {\n          this.logger.debug(err);\n          ctx.toolService.wait(10).then(() => {\n            ctx.scanVin();\n          });\n        });\n      } catch (error){\n        this.helper.alert(error);\n      }\n      \n    }\n    else {\n      this.enterVinManually();\n    }\n  }\n\n  async enterVinManually() {\n    this.logger.debug('enterVinManually');\n    let modal = await this.modalCtrl.create({\n      component: EnterVinPage\n    });\n    modal.present();\n    const { data } = await modal.onDidDismiss();\n    if (data) {\n      let reportSession = this.reportService.getReportSession();\n      reportSession.dlcModel = data.data;\n      this.reportService.saveReportSession(reportSession);\n      this.helper.goTo(RoutePath.DlcLocatorDetails);\n      // this.getDlcLocationByVin(data.vin);\n    }\n  }\n  cancel(){\n    this.helper.goBack();\n  }\n}\n"]}