{"version":3,"mappings":"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","names":["GroupByPipe","collection","property","groupedCollection","reduce","previous","current","push","Object","keys","map","key","value","pure","_angular_core__WEBPACK_IMPORTED_MODULE_6__","DtcDetailsPage","navCtrl","navParams","modalController","helper","navigationService","reportService","ctx","MilDTC","DisplayOBDCodes","ReportModel","Vin","vin","VehicleName","ymme","moduleValue","modulesWithDTC","find","x","id","ModuleId","ModuleName","name","DtcCount","dtcCount","Dtcs","dtcs","System","system","SubSystem","subSystem","i","length","item","definition","toString","split","join","dismiss","goTo","src_app_app_routing_module__WEBPACK_IMPORTED_MODULE_0__","queryParams","reportId","moduleId","src_app_bases_base_controller__WEBPACK_IMPORTED_MODULE_1__","selectors","features","decls","vars","consts","template"],"sources":["webpack:///src/app/components/group-by/group-by-pipe.ts","webpack:///src/app/pages/dtc-details/dtc-details.page.html","webpack:///src/app/pages/dtc-details/dtc-details.page.ts"],"sourcesContent":["import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'groupBy'\n})\nexport class GroupByPipe implements PipeTransform {\n  transform(collection: any[], property: string): any[] {\n    // prevents the application from breaking if the array of objects doesn't exist yet\n    if(!collection) {\n        return null;\n    }\n\n    const groupedCollection = collection.reduce((previous, current)=> {\n        if(!previous[current[property]]) {\n            previous[current[property]] = [current];\n        } else {\n            previous[current[property]].push(current);\n        }\n\n        return previous;\n    }, {});\n\n    // this will return an array of objects, each object containing a group of objects\n    return Object.keys(groupedCollection).map(key => ({ key, value: groupedCollection[key] }));\n  }\n}","<ion-content class=\"ion-padding\">\n  <h3 class=\"mt-5 mb-3\" *ngIf=\"MilDTC\">MIL DTC</h3>\n  <ion-list class=\"app-dtc-details\" *ngIf=\"MilDTC\">\n    <ion-list-header>Stored</ion-list-header>\n    <ion-item lines=\"none\">\n      <div class=\"pt-3\">\n        <h4>{{MilDTC.code}}</h4>\n        <p class=\"mb-4\" innerHTML=\"{{MilDTC.definition}}\"></p>\n      </div>\n    </ion-item>\n  </ion-list>\n  <h3 class=\"mt-5 mb-3\" *ngIf=\"DisplayOBDCodes\">Other OBD DTC Codes</h3>\n  <ion-list class=\"app-dtc-details\" *ngIf=\"DisplayOBDCodes && StoredCodes && StoredCodes.length\">\n    <ion-list-header>Stored</ion-list-header>\n    <ion-item lines=\"none\" *ngFor=\"let dtc of StoredCodes\">\n      <div class=\"pt-3\">\n        <h4>{{dtc.code}}</h4>\n        <p class=\"mb-4\" innerHTML=\"{{dtc.definition}}\"></p>\n      </div>\n    </ion-item>\n  </ion-list>\n  <ion-list class=\"app-dtc-details\" *ngIf=\"DisplayOBDCodes && PendingCodes && PendingCodes.length\">\n    <ion-list-header>Pending</ion-list-header>\n    <ion-item lines=\"none\" *ngFor=\"let dtc of PendingCodes\">\n      <div class=\"pt-3\">\n        <h4>{{dtc.code}}</h4>\n        <p class=\"mb-4\" innerHTML=\"{{dtc.definition}}\"></p>\n      </div>\n    </ion-item>\n  </ion-list>\n  <ion-list class=\"app-dtc-details\" *ngIf=\"DisplayOBDCodes && PermanentCodes && PermanentCodes.length\">\n    <ion-list-header>Permanent</ion-list-header>\n    <ion-item lines=\"none\" *ngFor=\"let dtc of PermanentCodes\">\n      <div class=\"pt-3\">\n        <h4>{{dtc.code}}</h4>\n        <p class=\"mb-4\" innerHTML=\"{{dtc.definition}}\"></p>\n      </div>\n    </ion-item>\n  </ion-list>\n  <h3 class=\"mt-5 mb-3\" *ngIf=\"ModuleName\">{{ModuleName}} DTCs</h3>\n  <ion-list class=\"app-dtc-details\" *ngFor=\"let object of Dtcs | groupBy:'type'\">\n    <ion-list-header *ngIf=\"object.key\">{{object.key}}</ion-list-header>\n    <ion-list-header *ngIf=\"!object.key || object.key === null\">N/A</ion-list-header>\n    <ion-item lines=\"none\" *ngFor=\"let dtc of object.value\">\n      <div class=\"pt-3\">\n        <h4>{{dtc.code}}</h4>\n        <p class=\"mb-4\" innerHTML=\"{{dtc.definition}}\"></p>\n      </div> \n    </ion-item>\n  </ion-list>\n</ion-content>\n<ion-footer class=\"ion-no-border p-2\">\n  <ion-toolbar class=\"py-1\">\n    <ion-button class=\"app-button\" expand=\"block\" (click)=\"backToReportPage()\">Close</ion-button>\n  </ion-toolbar>\n</ion-footer>","import { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { DtcItem, DtcModel, ReportModel } from 'src/app/models/app.model';\nimport { NavController, NavParams, ModalController } from '@ionic/angular';\nimport { HelperService } from 'src/app/services/helper.service';\nimport { ReportServiceProvider } from 'src/app/services/report-service/report-service';\nimport { RoutePath } from 'src/app/app-routing.module';\nimport { NavigationService } from 'src/app/services/navigation.service';\nimport { BaseController } from 'src/app/bases/base-controller';\n\n@Component({\n  selector: 'app-dtc-details',\n  templateUrl: './dtc-details.page.html',\n  styleUrls: ['./dtc-details.page.scss'],\n})\nexport class DtcDetailsPage extends BaseController implements OnInit {\n\n  ModuleName = '';\n  public ModuleId = '';\n  VehicleName = '';\n  Vin = '';\n  DtcCount = 0;\n  public ReportModel: ReportModel;\n  public MilDTC: DtcItem;\n  public PendingCodes: DtcItem[];\n  public StoredCodes: DtcItem[];\n  public PermanentCodes: DtcItem[];\n  public DisplayOBDCodes: boolean;\n  ReportData: Observable<any>;\n  System: string;\n  SubSystem: string;\n  Dtcs: Array<DtcModel> = [];\n  DtcsView:any;\n  constructor(public navCtrl: NavController, \n    public navParams: NavParams,\n    public modalController: ModalController,\n    public helper: HelperService,\n    private navigationService: NavigationService,\n    private reportService: ReportServiceProvider) {\n      super('DtcDetailsPage');\n  }\n\n  ngOnInit() {\n  }\n\n  async ionViewDidEnter() {\n    let ctx = this;\n    if(!ctx.MilDTC && !ctx.DisplayOBDCodes){\n      if(this.ReportModel){\n        ctx.Vin = this.ReportModel.vin;\n        ctx.VehicleName = this.ReportModel.ymme;\n        let moduleValue = this.ReportModel.modulesWithDTC.find(x => x.id === ctx.ModuleId);\n        if (moduleValue) {\n          ctx.ModuleName = moduleValue.name;\n          ctx.DtcCount = moduleValue.dtcCount;\n          ctx.Dtcs = moduleValue.dtcs;\n          ctx.System = moduleValue.system;\n          ctx.SubSystem = moduleValue.subSystem;\n          let i=0;\n          for (i; i < moduleValue.dtcs.length;i++){\n            const item = moduleValue.dtcs[i];\n            ctx.Dtcs[i].definition = item.definition.toString().split('`').join('</br>');\n          }\n        }\n      }\n    }\n  }\n\n  backToReportPage() {\n    this.modalController.dismiss();\n  }\n\n  viewEraseDtcs() {\n    this.navigationService.goTo(RoutePath.DtcErase, {\n      queryParams: {\n        reportId: this.ReportModel ? this.ReportModel.id : null,\n        moduleId: this.ModuleId,\n        system: this.System,\n        subSystem: this.SubSystem\n      }\n    });\n  }\n}"]}