{"version":3,"file":"src_app_pages_change-tool-name_change-tool-name_module_ts-es2015.js","mappings":";;;;;;;;;;;;;;;;AACuD;AAEM;;;AAE7D,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,sEAAkB;KAC9B;CACF,CAAC;AAMK,MAAM,+BAA+B;;8GAA/B,+BAA+B;4HAA/B,+BAA+B;gIAHjC,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC,EAC9B,yDAAY;mIAEX,+BAA+B,oFAFhC,yDAAY;;;;;;;;;;;;;;;;;;;;;ACbuB;AACF;AAEA;AAEuC;AAEvB;;AAWtD,MAAM,wBAAwB;;gGAAxB,wBAAwB;qHAAxB,wBAAwB;yHAR1B;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,6FAA+B;SAChC;mIAGU,wBAAwB,mBAFpB,sEAAkB,aAL/B,yDAAY;QACZ,uDAAW;QACX,uDAAW;QACX,6FAA+B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTC;AACe;AAEI;AAChC;AAGwC;AACH;AAEM;AACsD;AACZ;;;;;;;;;;ICAtG,kFAAiH;IAA/B,qZAA8B;IAAC,wDAAsB;IAAA,6DAAa;;;IAAnC,2DAAsB;IAAtB,uFAAsB;;;;IAFzI,0EAAqG;IACnG,0EAAiB;IAAA,iFAAqB;IAAA,iEAAK;IAAA,+EAAmB;IAAA,6DAAK;IACnE,qIAAoJ;IACpJ,4EAAU;IACR,2EAAS;IACP,8EAAgD;IAAnB,wTAAkB;IAC7C,yEAAmC;IAAA,mEAAM;IAAA,6DAAI;IAC/C,6DAAU;IACZ,6DAAU;IACZ,6DAAW;IACb,6DAAM;;;IARkE,2DAAU;IAAV,oFAAU;;ADO/E,MAAM,kBAAmB,SAAQ,yEAAc;IAgBpD,YACU,MAAqB,EACrB,eAAgC,EAChC,iBAAoC,EACpC,WAAgC,EAChC,QAAkB,EAClB,IAAY,EACZ,cAAiC,EACjC,GAAQ;QAEhB,KAAK,CAAC,oBAAoB,CAAC,CAAC;QATpB,WAAM,GAAN,MAAM,CAAe;QACrB,oBAAe,GAAf,eAAe,CAAiB;QAChC,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,gBAAW,GAAX,WAAW,CAAqB;QAChC,aAAQ,GAAR,QAAQ,CAAU;QAClB,SAAI,GAAJ,IAAI,CAAQ;QACZ,mBAAc,GAAd,cAAc,CAAmB;QACjC,QAAG,GAAH,GAAG,CAAK;;QAvBlB,UAAK,GAAG,kBAAkB,CAAC;QAG3B,eAAU,GAAG,IAAI,CAAC;QAClB,UAAK,GAAG,CAAC,CAAC;QAEV,UAAK,GAAG,KAAK,CAAC;QACd,WAAM,GAAG,eAAe,CAAC;QACzB,iBAAY,GAAG,KAAK,CAAC;QACrB,aAAQ,GAAG,EAAE,CAAC;QACd,aAAQ,GAAG,EAAE,CAAC;QAEd,8CAAmB,IAAI,EAAC;QACxB,iDAAsB,KAAK,EAAC;QAC5B,6DAAkC,KAAK,EAAC;IAYxC,CAAC;IAED,SAAS,CAAC,MAAM,EAAE,MAAM,GAAG,EAAE;QAC3B,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE;YACjB,IAAI,MAAM,IAAI,IAAI,EAAE;gBAClB,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;gBACzB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,GAAG,KAAK,GAAG,MAAM,CAAC,CAAC;aACrD;YACD,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;QAC3B,CAAC,CAAC,CAAC;IACL,CAAC;IAEK,YAAY,CAAC,MAAe;;YAChC,IAAG,kFAAoB,EAAC;gBACtB,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;gBACtC,MAAM,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;aAC3B;YACD,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC9C,SAAS,EAAE,sHAAuB;gBAClC,cAAc,EAAE;oBACd,MAAM,EAAE,MAAM,CAAC,EAAE;oBACjB,QAAQ,EAAE,MAAM,CAAC,WAAW;iBAC7B;gBACD,QAAQ,EAAE,yCAAyC;gBACnD,YAAY,EAAE,IAAI;gBAClB,eAAe,EAAE,KAAK;aACvB,CAAC,CAAC;YACH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;YACtB,MAAM,IAAI,GAAG,MAAM,KAAK,CAAC,YAAY,EAAE,CAAC;YACxC,IAAG,IAAI,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,EAAC;gBACxC,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBACnD,OAAO,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,sEAAc,CAAC,CAAC;aACzD;QACH,CAAC;KAAA;IAEK,gBAAgB;;YACpB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YACxB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;YAC1B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YACvB,IAAI,CAAC,KAAK,GAAG,kBAAkB,CAAC;YAChC,IAAI,CAAC,MAAM,GAAG,eAAe,CAAC;YAC9B,IAAI,GAAG,GAAG,IAAI,CAAC;YACf,GAAG,CAAC,OAAO,GAAG,EAAE,CAAC;YACjB,mEAAI,uCAAoB,UAAU,CAAC,GAAS,EAAE,CAAC;gBAC7C,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;oBAC9C,IAAI,CAAC,iBAAiB;yBACnB,IAAI,CAAC,kFAA0B,EAAE;wBAChC,WAAW,EAAE;4BACX,UAAU,EAAE,gFAAwB;yBACrC;qBACF,CAAC;yBACD,IAAI,CAAC,GAAS,EAAE,CAAC;wBAChB,IAAI,kFAAoB,EAAE;4BACxB,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;4BACtC,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;yBACrB;oBACH,CAAC,EAAC,CAAC;iBACN;YACH,CAAC,GAAE,wFAAgC,CAAC,OAAC;QACvC,CAAC;KAAA;IAEK,eAAe;;YACnB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YACvB,MAAM,mEAAI,2EAAkB,MAAtB,IAAI,CAAoB,CAAC;QACjC,CAAC;KAAA;IAoEK,gBAAgB;;YACpB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YACzB,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;YACrB,IAAI,CAAC,UAAU,GAAG,sBAAsB,CAAC;YACzC,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,sEAAc,CAAC,CAAC,IAAI,CAAC,GAAS,EAAE,CAAC;gBAC5D,IAAI,kFAAoB,EAAE;oBACxB,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;iBACrB;YACH,CAAC,EAAC,CAAC;QACL,CAAC;KAAA;IAED,eAAe;QACb,IAAI,mEAAI,2CAAiB,EAAE;YACzB,YAAY,CAAC,mEAAI,2CAAiB,CAAC,CAAC;YACpC,mEAAI,uCAAoB,IAAI,OAAC;SAC9B;QAED,yDAAyD;QACzD,QAAQ,CAAC,mBAAmB,CAAC,YAAY,EAAE,GAAG,EAAE;YAC9C,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,8BAA8B,CAAC,CAAC;QACpD,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,iCAAiC;QACtC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;YAC9B,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,GAAG,EAAE;gBAC3C,IAAI,CAAC,sBAAsB,EAAE,CAAC;YAChC,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,sBAAsB;QAC5B,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAEK,MAAM,CAAC,OAAO,GAAG,IAAI;;YACzB,IAAI,iFAAmB,EAAE;gBACvB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;gBACzB,IAAI,OAAO,EAAE;oBACX,IAAI,CAAC,MAAM,CAAC,OAAO,CACjB,eAAe,EACf,0EAAkB,EAClB,GAAS,EAAE,CAAC;wBACV,IAAI,CAAC,gBAAgB,EAAE,CAAC;oBAC1B,CAAC,GACD,GAAG,EAAE;wBACH,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;oBAC5B,CAAC,CACF,CAAC;iBACH;qBAAM;oBACL,IAAI,CAAC,gBAAgB,EAAE,CAAC;iBACzB;aACF;QACH,CAAC;KAAA;;;;QAtHC,IAAI,kFAAoB,EAAE;YACxB,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;gBAC5B,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,QAAQ,EAAE,EAAE;oBAC5C,IAAI,QAAQ,CAAC,MAAM,CAAC,IAAI,QAAQ,CAAC,MAAM,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE;wBACnD,IACE,sDAAU,CAAC,wFAAgC,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC,EAC9D;4BACA,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;4BAC5C,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAClC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,QAAQ,CAAC,IAAI,CAAC,CAC/B,CAAC;4BACF,IAAI,KAAK,GAAG,CAAC,EAAE;gCACb,mEAAI,oEAAW,MAAf,IAAI,EAAY,QAAQ,CAAC,IAAI,CAAC,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;gCAClD,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;gCACxB,sFAAoB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;6BAC3C;4BACD,mEAAI,0CAAuB,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,OAAC;4BACnD,IAAI,mEAAI,8CAAoB,EAAE;gCAC5B,mEAAI,yFAAgC,MAApC,IAAI,CAAkC,CAAC,IAAI,EAAE,CAAC;6BAC/C;yBACF;qBACF;gBACH,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;SACJ;aAAM;YACL,IAAI,OAAO,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,yBAAyB,EAAE,CAAC;YACjE,IAAI,OAAO,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;gBACjC,OAAO,OAAO,CAAC,MAAM,EAAE;oBACrB,IAAI,MAAM,GAAG,OAAO,CAAC,KAAK,EAAE,CAAC;oBAC7B,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,oBAAoB,EAAE,MAAM,CAAC,CAAC;oBAChD,mEAAI,oEAAW,MAAf,IAAI,EAAY,MAAM,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;oBAC9C,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;oBACxB,sFAAoB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;iBAC3C;gBACD,mEAAI,0CAAuB,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,OAAC;gBACnD,IAAI,mEAAI,8CAAoB,EAAE;oBAC5B,MAAM,mEAAI,yFAAgC,MAApC,IAAI,CAAkC,CAAC;iBAC9C;aACF;SACF;IACH,CAAC;0EAEU,EAAU,EAAE,IAAY;IACjC,MAAM,SAAS,GAAG,YAAY,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;IAC3C,IAAG,SAAS,EAAC;QACX,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,6DAAO,CAAC,EAAE,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC,CAAC;KACrD;SAAM;QACL,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,6DAAO,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC;KAC1C;AACH,CAAC;;QAGC,IAAI,CAAC,mEAAI,0DAAgC,EAAE;YACzC,mEAAI,sDAAmC,IAAI,OAAC;YAC5C,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC9C,SAAS,EAAE,kIAA2B;gBACtC,YAAY,EAAE,IAAI;gBAClB,eAAe,EAAE,KAAK;gBACtB,QAAQ,EAAE,yBAAyB;aACpC,CAAC,CAAC;YACH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;YACtB,MAAM,KAAK,CAAC,YAAY,EAAE,CAAC;SAC5B;IACH,CAAC;;oFA7JU,kBAAkB;iHAAlB,kBAAkB;QCzB/B,kFAAiC;QAC/B,0EAAsC;QACpC,0EAAgD;QAC9C,sEAAI;QAAA,+EAAmB;QAAA,6DAAK;QAC5B,0EAA8B;QAC5B,6EAAyD;QAC3D,6DAAM;QACN,wEAA6B;QAAA,yEAAa;QAAA,6DAAI;QAC9C,4EAAU;QACR,4EAAS;QACP,+EAAgD;QAAnB,6IAAS,YAAQ,IAAC;QAC7C,yEAAuC;QAAA,mEAAM;QAAA,6DAAI;QACnD,6DAAU;QACZ,6DAAU;QACZ,6DAAW;QACb,6DAAM;QACN,kHAUM;QACR,6DAAM;QACR,6DAAc;;QA1Be,2DAAsB;QAAtB,oFAAsB;QAciB,4DAAmC;QAAnC,wGAAmC","sources":["./src/app/pages/change-tool-name/change-tool-name-routing.module.ts","./src/app/pages/change-tool-name/change-tool-name.module.ts","./src/app/pages/change-tool-name/change-tool-name.page.ts","./src/app/pages/change-tool-name/change-tool-name.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ChangeToolNamePage } from './change-tool-name.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ChangeToolNamePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ChangeToolNamePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ChangeToolNamePageRoutingModule } from './change-tool-name-routing.module';\n\nimport { ChangeToolNamePage } from './change-tool-name.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ChangeToolNamePageRoutingModule\n  ],\n  declarations: [ChangeToolNamePage]\n})\nexport class ChangeToolNamePageModule {}\n","import { ChangeDetectorRef, Component, NgZone } from '@angular/core';\nimport { ModalController, Platform } from '@ionic/angular';\nimport {\n  AppConfig,\n  AppStrings,\n  SUPPORTED_BLUETOOTH_DEVICE_NAMES,\n} from 'src/app/configs/app.config';\nimport { BleData } from 'src/app/models/app.model';\nimport { NavigationService } from 'src/app/services/navigation.service';\nimport { RoutePath } from 'src/app/app-routing.module';\nimport _ from 'lodash';\nimport { BLE } from '@ionic-native/ble/ngx';\nimport { HelperService } from 'src/app/services/helper.service';\nimport { BaseController } from 'src/app/bases/base-controller';\nimport { AppState } from 'src/app/services/state/app.state';\nimport { ConnectivityService } from 'src/app/services/innova-vci-service/src/connectivity/connectivity.service';\nimport { CarMDUtils } from 'src/app/services/utility/carmd.utils';\nimport { MultipleToolsFoundModalPage } from 'src/app/modals/multiple-tools-found-modal/multiple-tools-found-modal.page';\nimport { ChangeToolNameModalPage } from 'src/app/modals/change-tool-name-modal/change-tool-name-modal.page';\n\n@Component({\n  selector: 'app-change-tool-name',\n  templateUrl: './change-tool-name.page.html',\n  styleUrls: ['./change-tool-name.page.scss'],\n})\nexport class ChangeToolNamePage extends BaseController {\n  title = 'Scanning devices';\n  statusText: string;\n  resultText: string;\n  isScanning = true;\n  retry = 0;\n  timer: any;\n  found = false;\n  result = 'Starting scan';\n  isCancelling = false;\n  deviceId = '';\n  toolName = '';\n  devices: BleData[];\n  #scanningTimeout = null;\n  #hasMultipleDevices = false;\n  #multipleToolsFoundPopupVisible = false;\n  constructor(\n    private helper: HelperService,\n    private modalController: ModalController,\n    private navigationService: NavigationService,\n    private connService: ConnectivityService,\n    private platform: Platform,\n    private zone: NgZone,\n    private changeDetector: ChangeDetectorRef,\n    private ble: BLE\n  ) {\n    super('ChangeToolNamePage');\n  }\n\n  setStatus(result, status = '') {\n    this.zone.run(() => {\n      if (result != null) {\n        this.resultText = result;\n        this.logger.debug(this.resultText + ' - ' + status);\n      }\n      this.statusText = status;\n    });\n  }\n\n  async selectDevice(device: BleData) {\n    if(AppState.isOnAndroid){\n      console.log('Call this.ble.stopScan');\n      await this.ble.stopScan();\n    }\n    const modal = await this.modalController.create({\n      component: ChangeToolNameModalPage,\n      componentProps: {\n        toolId: device.id,\n        toolName: device.displayName\n      },\n      cssClass: 'app-modal-dialog-2 px-2 keyboard-active',\n      showBackdrop: true,\n      backdropDismiss: false\n    });\n    await modal.present();\n    const data = await modal.onDidDismiss();\n    if(data && data.data && data.data.newName){\n      localStorage.setItem(device.id, data.data.newName);\n      return this.navigationService.popToRoot(RoutePath.Home);\n    }\n  }\n\n  async ionViewWillEnter() {\n    this.isScanning = false;\n    this.isCancelling = false;\n    this.isScanning = true;\n    this.title = 'Scanning devices';\n    this.result = 'Starting scan';\n    let ctx = this;\n    ctx.devices = [];\n    this.#scanningTimeout = setTimeout(async () => {\n      if (!this.devices || this.devices.length === 0) {\n        this.navigationService\n          .goTo(RoutePath.ConnectionFailed, {\n            queryParams: {\n              sourcePage: RoutePath.ChangeToolName,\n            },\n          })\n          .then(async () => {\n            if (AppState.isOnAndroid) {\n              console.log('Call this.ble.stopScan');\n              this.ble.stopScan();\n            }\n          });\n      }\n    }, AppConfig.scanningDevicesTimeout);\n  }\n\n  async ionViewDidEnter() {\n    this.isScanning = true;\n    await this.#startScanDevices();\n  }\n\n  async #startScanDevices() {\n    if (AppState.isOnAndroid) {\n      this.ble.stopScan().then(() => {\n        this.ble.startScan([]).subscribe((btDevice) => {\n          if (btDevice['name'] && btDevice['name'].length > 0) {\n            if (\n              _.includes(SUPPORTED_BLUETOOTH_DEVICE_NAMES, btDevice['name'])\n            ) {\n              this.logger.debug('Device found', btDevice);\n              const index = this.devices.findIndex(\n                (d) => d.id === btDevice['id']\n              );\n              if (index < 0) {\n                this.#addDevice(btDevice['id'], btDevice['name']);\n                this.isScanning = false;\n                CarMDUtils.refreshUI(this.changeDetector);\n              }\n              this.#hasMultipleDevices = this.devices.length > 1;\n              if (this.#hasMultipleDevices) {\n                this.#displayMultipleToolsFoundPopup().then();\n              }\n            }\n          }\n        });\n      });\n    } else {\n      let devices = await this.connService.discoverBluetoothDevices2();\n      if (devices && devices.length > 0) {\n        while (devices.length) {\n          let device = devices.shift();\n          this.logger.debug('Found Pro15 device', device);\n          this.#addDevice(device['id'], device['name']);\n          this.isScanning = false;\n          CarMDUtils.refreshUI(this.changeDetector);\n        }\n        this.#hasMultipleDevices = this.devices.length > 1;\n        if (this.#hasMultipleDevices) {\n          await this.#displayMultipleToolsFoundPopup();\n        }\n      }\n    }\n  }\n\n  #addDevice(id: string, name: string){\n    const localName = localStorage.getItem(id);\n    if(localName){\n      this.devices.push(new BleData(id, localName, true));\n    } else {\n      this.devices.push(new BleData(id, name));\n    }\n  }\n\n  async #displayMultipleToolsFoundPopup() {\n    if (!this.#multipleToolsFoundPopupVisible) {\n      this.#multipleToolsFoundPopupVisible = true;\n      const modal = await this.modalController.create({\n        component: MultipleToolsFoundModalPage,\n        showBackdrop: true,\n        backdropDismiss: false,\n        cssClass: 'app-modal-dialog-3 px-2',\n      });\n      await modal.present();\n      await modal.onDidDismiss();\n    }\n  }\n\n  async doCancelScanning() {\n    this.isCancelling = true;\n    this.resultText = '';\n    this.statusText = 'One moment please...';\n    return this.helper.popToRoot(RoutePath.Home).then(async () => {\n      if (AppState.isOnAndroid) {\n        this.ble.stopScan();\n      }\n    });\n  }\n\n  ionViewDidLeave() {\n    if (this.#scanningTimeout) {\n      clearTimeout(this.#scanningTimeout);\n      this.#scanningTimeout = null;\n    }\n\n    // Unregister the custom back button action for this page\n    document.removeEventListener('backbutton', () => {\n      this.logger.debug('unregister back button event');\n    });\n  }\n\n  public initializeBackButtonCustomHandler(): void {\n    this.platform.ready().then(() => {\n      document.addEventListener('backbutton', () => {\n        this.customHandleBackButton();\n      });\n    });\n  }\n\n  private customHandleBackButton(): void {\n    this.cancel();\n  }\n\n  async cancel(confirm = true) {\n    if (AppState.isOnDevice) {\n      this.isCancelling = true;\n      if (confirm) {\n        this.helper.confirm(\n          'Are you sure?',\n          AppStrings.CONFIRM,\n          async () => {\n            this.doCancelScanning();\n          },\n          () => {\n            this.isCancelling = false;\n          }\n        );\n      } else {\n        this.doCancelScanning();\n      }\n    }\n  }\n}\n","<ion-content class=\"ion-padding\">\n  <div class=\"app-content-center-midle\">\n    <div class=\"text-center\" [hidden]=\"!isScanning\">\n      <h2>Scanning devices...</h2>\n      <div class=\"app-spinner-wrap\">\n        <ion-spinner name=\"circles\" class=\"size-8\"></ion-spinner>\n      </div>\n      <p class=\"font-size-20 mb-5\">Starting scan</p>\n      <ion-grid>\n        <ion-row>\n          <ion-col class=\"text-center\" (click)=\"cancel()\">\n            <a class=\"text-secondary font-size-18\">Cancel</a>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </div>\n    <div class=\"text-center w-100 app-select-device-box px-3 py-4\" *ngIf=\"devices && devices.length > 0\">\n      <h2 class=\"mb-5\">Please select device <br/>to change Tool Name</h2>\n      <ion-button class=\"app-button mb-5\" expand=\"block\" *ngFor=\"let device of devices\" (click)=\"selectDevice(device)\">{{device.displayName}}</ion-button>\n      <ion-grid>\n        <ion-row>\n          <ion-col class=\"text-center\" (click)=\"cancel()\">\n            <a class=\"text-white font-size-18\">Cancel</a>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </div>\n  </div>\n</ion-content>\n"],"names":[],"sourceRoot":"webpack:///"}